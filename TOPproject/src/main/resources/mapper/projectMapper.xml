<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
  <mapper namespace="global.sesoc.TOPproject.DAO.ProjectMapperInterface">
  
  
  <!-- U P D A T E -->
  
  <update id="updateProject" parameterType="Project">
  	UPDATE top_project
  	SET p_name = #{p_name}, p_memberlist = #{p_memberlist}
  	WHERE p_num = #{p_num} AND p_m_id = #{p_m_id}
  </update>
  
  
  <update id="updateProjectSchedule" parameterType="Schedule">
  	UPDATE schedule_project
  	SET start_date = #{start_date}, end_date = #{end_date}, content = #{content}
  		<if test="color != null">
  			,color = #{color}
  		</if>
  	WHERE p_num = #{p_num}
  </update>
  
  
  <update id="updateProjectNotice" parameterType="Memo">
  	UPDATE notice
  	SET n_content = #{n_content}
  	WHERE p_num = #{p_num}
  </update>
  
  
  <!-- S E L E C T -->
  
  
  
  <!-- I N S E R T -->
 
  <insert id="insertProject" parameterType="Project">
	INSERT INTO top_project(
	  p_num, p_m_id, p_name, p_memberlist
	)values(
	  p_num_seq.NEXTVAL, #{p_m_id}, #{p_name}, #{p_memberlist} 
	)
  </insert>
  
  
  <insert id="insertProjectSchedule" parameterType="Schedule">
  	INSERT INTO schedule_project(
  		p_num, start_date, end_date, content
  	)values(
  		#{p_num}, #{start_date}, #{end_date}, #{content} 
  	)
  </insert>
  
  
  <insert id="insertProjectNotice" parameterType="Memo">
  	INSERT INTO notice(
  		p_num, n_content
  	)VALUES(
  		#{p_num}, #{n_content}
  	)
  </insert>
  
  
  <!-- D E L E T E -->
  
  <update id="deleteProjectNotice" parameterType="Memo">
  	UPDATE notice
  	SET n_deldate = SYSDATE
  	WHERE p_num = #{p_num}
  </update>
  <!-- S E L E C T -->
  <select id="noticeList"  parameterType="String" resultType="Notice">
  SELECT
  	 p_num
  	,n_content
  	,n_indate
  	,n_deldate
  FROM
   	notice
  WHERE
    p_num = #{p_num} 	
  
  
  </select>
  
  
  </mapper>